<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M2 InvestigaciÃ³n â€” MediciÃ³n y AnÃ¡lisis | MSE-SFT EbanisterÃ­a</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <header class="header-inst">
        <div class="logo-area">
            <div>
                <h1>MSE-SFT EbanisterÃ­a</h1><span>M2 Â· InvestigaciÃ³n: MediciÃ³n y AnÃ¡lisis Â· 35h</span>
            </div>
        </div>
        <nav><a href="index.html">Inicio</a><a href="modulo1.html">M1</a><a href="modulo2.html" class="active">M2</a><a
                href="modulo3.html">M3</a><a href="modulo4.html">M4</a><a href="modulo5.html">M5</a><a
                href="actividades.html">Integradoras</a></nav>
    </header>

    <main class="p-page" style="display:flex;flex-direction:column;gap:24px;">
        <!-- Hero -->
        <section class="card" style="padding:0;overflow:hidden;">
            <div class="m2-header" style="padding:32px;color:white;position:relative;overflow:hidden;">
                <div
                    style="position:absolute;right:-30px;top:-30px;width:160px;height:160px;border-radius:50%;background:rgba(255,255,255,0.06);">
                </div>
                <span class="mod-badge" style="background:rgba(255,255,255,0.2);color:white;">ğŸ”¬ MÃ³dulo 2</span>
                <h2 style="font-size:28px;font-weight:900;margin-top:8px;">InvestigaciÃ³n: MediciÃ³n y AnÃ¡lisis</h2>
                <p style="opacity:0.85;max-width:600px;margin-top:8px;">Dominar instrumentos de precisiÃ³n, anÃ¡lisis de
                    especies madereras y tÃ©cnicas de uniÃ³n.</p>
                <div style="display:flex;gap:16px;margin-top:16px;">
                    <div style="background:rgba(255,255,255,0.12);padding:10px 16px;border-radius:8px;"><strong
                            style="font-size:20px;">35h</strong><br><span
                            style="font-size:10px;opacity:0.8;">Horas</span></div>
                    <div style="background:rgba(255,255,255,0.12);padding:10px 16px;border-radius:8px;"><strong
                            style="font-size:20px;" id="count-m2">0</strong><br><span
                            style="font-size:10px;opacity:0.8;">Bienes</span></div>
                    <div style="background:rgba(255,255,255,0.12);padding:10px 16px;border-radius:8px;"><strong
                            style="font-size:20px;">11</strong><br><span
                            style="font-size:10px;opacity:0.8;">Actividades</span></div>
                </div>
            </div>
        </section>

        <!-- SubcategorÃ­as -->
        <section>
            <div style="display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap;" id="m2-filters"></div>
            <div class="grid-3" id="m2-bienes"></div>
        </section>

        <!-- SecciÃ³n Uniones (integra landing existente) -->
        <section class="card">
            <h3 style="font-size:18px;font-weight:800;margin-bottom:8px;">ğŸ”— Uniones de Madera: Ensambles, Juntas y
                Empalmes</h3>
            <p style="font-size:13px;color:var(--text-secondary);margin-bottom:16px;">MÃ³dulo interactivo con simuladores
                de uniones. Basado en los modelos didÃ¡cticos COM-232.</p>
            <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:12px;" id="unions-grid"></div>
        </section>

        <!-- Muestrarios -->
        <section class="card">
            <h3 style="font-size:18px;font-weight:800;margin-bottom:16px;">ğŸªµ Muestrarios y AnÃ¡lisis de Materiales</h3>
            <div class="grid-3" id="muestrarios-grid"></div>
        </section>
    </main>

    <!-- Detail Panel -->
    <div class="overlay" id="overlay" onclick="closeDetail()"></div>
    <div class="detail-panel" id="detail-panel"></div>

    <script>
        let DB = { bienes: [] };
        const UNIONS = [
            { id: 'mortise', title: 'Caja y Espiga', cat: 'Estructural', res: 90, spd: 40, desc: 'Espiga entra en caja. Patas de mesas y sillas.', rule: 'Espiga = 1/3 grosor', videoId: 'Pl4OXqej6nY' },
            { id: 'dovetail', title: 'Cola de Milano', cat: 'Decorativo', res: 95, spd: 20, desc: 'Forma trapecio. MecÃ¡nica: impide separaciÃ³n. Cajones finos.', rule: 'Pendiente 1:6 o 1:8', videoId: 'hl2ZRnoerDg' },
            { id: 'dowels', title: 'Tarugos / Espigas', cat: 'RÃ¡pido', res: 65, spd: 90, desc: 'Cilindros prefabricados. MÃ¡s rÃ¡pido para tableros.', rule: 'MÃ­nimo 2 por uniÃ³n', videoId: '62hAzhYTj40' },
            { id: 'halflap', title: 'Media Madera', cat: 'BÃ¡sico', res: 75, spd: 70, desc: '50% del espesor a cada pieza. Marcos y bastidores.', rule: 'Corte exacto 50%', videoId: 'MepnpSSyeTo' },
            { id: 'bridle', title: 'Horquilla', cat: 'Estructural', res: 85, spd: 60, desc: 'Caja abierta (U). Gran superficie de pegado. Marcos de puertas.', rule: 'DivisiÃ³n en 3 partes', videoId: 'WMsuCx9qRk4' }
        ];

        async function init() {
            try { const r = await fetch('principios_operacion.json'); DB = await r.json(); } catch (e) { }
            renderM2();
            renderUnions();
            renderMuestrarios();
            lucide.createIcons();
        }

        let m2Filter = 'Todos';
        const M2_SUBCATS = { 'Todos': null, 'MediciÃ³n': 'mediciÃ³n|calibr|wincha|distanci|nivel|escuadra|transport|gramil|falsa', 'SujeciÃ³n': 'tornillo|prensa|sargenta', 'Corte Manual': 'serrucho|arco|sierra', 'Modelos': 'modelo|muestrario|uniones' };

        function renderM2() {
            const bienes = DB.bienes.filter(b => b.modulo === 'M2');
            document.getElementById('count-m2').textContent = bienes.length;

            // Filters
            document.getElementById('m2-filters').innerHTML = Object.keys(M2_SUBCATS).map(k =>
                `<button class="grade-btn ${m2Filter === k ? 'active' : ''}" onclick="setM2Filter('${k}')">${k}</button>`
            ).join('');

            // Bienes
            let filtered = bienes;
            if (m2Filter !== 'Todos' && M2_SUBCATS[m2Filter]) {
                const rx = new RegExp(M2_SUBCATS[m2Filter], 'i');
                filtered = bienes.filter(b => rx.test(b.nombre) || rx.test(b.principles));
            }

            document.getElementById('m2-bienes').innerHTML = filtered.map(b => `
    <div class="card" style="cursor:pointer;border-left:4px solid var(--m2);" onclick="openDetail('${b.id}')">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;">
        <div style="flex:1;">
          <div style="font-size:14px;font-weight:700;">${b.nombre}</div>
          <div style="font-size:11px;color:var(--text-muted);margin-top:2px;" class="mono">${b.id} Â· ${b.brand_model}</div>
        </div>
        ${b.guion && b.guion !== 'N/A' ? '<span style="background:#E1F5FE;color:#0277BD;font-size:9px;padding:2px 6px;border-radius:4px;font-weight:700;">ğŸ¬ VIDEO</span>' : ''}
      </div>
      <p style="font-size:12px;color:var(--text-secondary);margin-top:8px;">${b.principles}</p>
      <div style="display:flex;gap:4px;margin-top:8px;">${b.grados ? b.grados.map(g => `<span style="background:#F5F5F5;font-size:10px;padding:2px 8px;border-radius:10px;font-weight:600;">${g}Â°</span>`).join('') : ''}</div>
    </div>
  `).join('');
        }

        function setM2Filter(f) { m2Filter = f; renderM2(); }

        function renderUnions() {
            document.getElementById('unions-grid').innerHTML = UNIONS.map(u => `
    <div class="card" style="cursor:pointer;text-align:center;padding:16px;" onclick="openUnion('${u.id}')">
      <div style="font-size:28px;margin-bottom:8px;">ğŸªµ</div>
      <div style="font-size:13px;font-weight:700;">${u.title}</div>
      <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">${u.cat}</div>
      <div style="display:flex;gap:8px;justify-content:center;margin-top:8px;">
        <span style="font-size:10px;background:#E8F5E9;color:#2E7D32;padding:2px 6px;border-radius:4px;">ğŸ’ª ${u.res}%</span>
        <span style="font-size:10px;background:#E1F5FE;color:#0277BD;padding:2px 6px;border-radius:4px;">âš¡ ${u.spd}%</span>
      </div>
    </div>
  `).join('');
        }

        function openUnion(id) {
            const u = UNIONS.find(x => x.id === id);
            if (!u) return;
            const panel = document.getElementById('detail-panel');
            panel.innerHTML = `
    <div class="dp-header m2-header">
      <button class="dp-close" onclick="closeDetail()">âœ•</button>
      <span class="mod-badge" style="background:rgba(255,255,255,0.2);color:white;">UniÃ³n Â· ${u.cat}</span>
      <h2 style="font-size:22px;font-weight:800;margin-top:8px;">${u.title}</h2>
      <p style="opacity:0.85;margin-top:4px;font-size:13px;">${u.desc}</p>
    </div>
    <div class="dp-section">
      <h4>ğŸ“ Regla de Oro</h4>
      <p style="font-size:15px;font-weight:700;color:var(--m2);background:var(--m2-bg);padding:12px;border-radius:8px;">${u.rule}</p>
    </div>
    <div class="dp-section">
      <h4>ğŸ“Š Rendimiento</h4>
      <div style="margin:8px 0;"><span style="font-size:12px;">Resistencia</span><div class="progress-bar" style="margin-top:4px;"><div class="fill" style="width:${u.res}%;background:#2E7D32;"></div></div><span style="font-size:11px;font-weight:700;">${u.res}%</span></div>
      <div><span style="font-size:12px;">Velocidad</span><div class="progress-bar" style="margin-top:4px;"><div class="fill" style="width:${u.spd}%;background:#0277BD;"></div></div><span style="font-size:11px;font-weight:700;">${u.spd}%</span></div>
    </div>
    ${u.videoId ? `<div class="dp-section"><h4>ğŸ¬ Video Tutorial</h4><div style="position:relative;padding-top:56.25%;background:#000;border-radius:8px;overflow:hidden;"><iframe src="https://www.youtube.com/embed/${u.videoId}" style="position:absolute;top:0;left:0;width:100%;height:100%;border:none;" allowfullscreen></iframe></div></div>` : ''}
  `;
            panel.classList.add('open');
            document.getElementById('overlay').classList.add('open');
        }

        function renderMuestrarios() {
            const items = DB.bienes.filter(b => b.id.startsWith('COM-24'));
            document.getElementById('muestrarios-grid').innerHTML = items.map(b => `
    <div class="card" style="cursor:pointer;border-left:4px solid var(--m2);" onclick="openDetail('${b.id}')">
      <div style="font-size:28px;margin-bottom:8px;">ğŸªµ</div>
      <div style="font-size:14px;font-weight:700;">${b.nombre}</div>
      <div style="font-size:11px;color:var(--text-muted);margin-top:2px;">${b.brand_model}</div>
      <p style="font-size:12px;color:var(--text-secondary);margin-top:8px;">${b.principles}</p>
    </div>
  `).join('');
        }

        function openDetail(id) {
            const b = DB.bienes.find(x => x.id === id);
            if (!b) return;
            const panel = document.getElementById('detail-panel');
            const modGrad = 'linear-gradient(135deg,#0277BD,#01579B)';
            panel.innerHTML = `
    <div class="dp-header" style="background:${modGrad};">
      <button class="dp-close" onclick="closeDetail()">âœ•</button>
      <span class="mod-badge" style="background:rgba(255,255,255,0.2);color:white;">${b.modulo} Â· ${b.categoria}</span>
      <h2 style="font-size:22px;font-weight:800;margin-top:8px;">${b.nombre}</h2>
      <p style="opacity:0.85;font-size:13px;margin-top:4px;"><span class="mono">${b.id}</span> Â· ${b.brand_model}</p>
    </div>
    <div class="dp-section"><h4>âš¡ Principios</h4><p style="font-size:13px;">${b.principles}</p></div>
    <div class="dp-section"><h4>ğŸ“– Operatividad</h4><p style="font-size:13px;">${b.manuals.operatividad}</p></div>
    <div class="dp-section"><h4>ğŸ”§ Mantenimiento</h4>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;">
        <div style="background:#F5F5F5;padding:10px;border-radius:8px;"><div style="font-size:10px;color:var(--text-muted);font-weight:700;">LIMPIEZA</div><div style="font-size:12px;margin-top:4px;">${b.manuals.mantenimiento.limpieza}</div></div>
        <div style="background:#F5F5F5;padding:10px;border-radius:8px;"><div style="font-size:10px;color:var(--text-muted);font-weight:700;">LUBRICACIÃ“N</div><div style="font-size:12px;margin-top:4px;">${b.manuals.mantenimiento.lubricacion}</div></div>
        <div style="background:#F5F5F5;padding:10px;border-radius:8px;"><div style="font-size:10px;color:var(--text-muted);font-weight:700;">AFILADO</div><div style="font-size:12px;margin-top:4px;">${b.manuals.mantenimiento.afilado}</div></div>
        <div style="background:#F5F5F5;padding:10px;border-radius:8px;"><div style="font-size:10px;color:var(--text-muted);font-weight:700;">CALIBRACIÃ“N</div><div style="font-size:12px;margin-top:4px;">${b.manuals.mantenimiento.calibracion}</div></div>
      </div>
    </div>
    ${b.guion && b.guion !== 'N/A' ? `<div class="dp-section"><h4>ğŸ¬ Video</h4><div style="background:#ECEFF1;padding:16px;border-radius:8px;text-align:center;"><div style="font-size:13px;font-weight:700;">${b.guion}</div><div style="font-size:11px;color:var(--text-muted);margin-top:4px;">Disponible en USB de capacitaciÃ³n</div></div></div>` : ''}
  `;
            panel.classList.add('open');
            document.getElementById('overlay').classList.add('open');
        }

        function closeDetail() {
            document.getElementById('detail-panel').classList.remove('open');
            document.getElementById('overlay').classList.remove('open');
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>